C51 COMPILER V9.59.0.0   STEPPER_MOTOR                                                     08/11/2025 16:01:55 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE STEPPER_MOTOR
OBJECT MODULE PLACED IN .\Objects\stepper_motor.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE stepper_motor.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\stepper_motor.lst) TABS(2) OBJECT(.\Objects\stepper_motor.obj)

line level    source

   1           #include <reg51.h>
   2          
   3          sbit start = P1^0;
   4          sbit rev = P1^1;
   5          sbit inc = P1^2;
   6          sbit dec = P1^3;
   7          sbit stop = P1^4;
   8          
   9          sbit EN1 = P2^0;
  10          sbit EN2 = P2^1;
  11          sbit IN1 = P2^4;
  12          sbit IN2 = P2^5;
  13          sbit IN3 = P2^6;
  14          sbit IN4 = P2^7;
  15          
  16          unsigned int speed = 300;    
  17          bit dir = 0;          
  18          bit motor_on = 0;            
  19          
  20          void delay(unsigned int ms) {
  21   1          unsigned int i, j;
  22   1          for (i = 0; i < ms; i++)
  23   1              for (j = 0; j < 100; j++);
  24   1      }
  25          
  26          void forward() {
  27   1          IN1 =1; IN2 =0; IN3= 0; IN4=0;
  28   1         delay(speed);
  29   1          IN1=0;IN2 =1; IN3=0; IN4= 0;
  30   1          delay(speed);
  31   1          IN1 =0; IN2=0; IN3=1; IN4=0;
  32   1          delay(speed);
  33   1          IN1=0; IN2 =0; IN3=0; IN4= 1;
  34   1          delay(speed);
  35   1      }
  36          
  37          void reverse() {
  38   1          IN1=0; IN2 =0; IN3=0; IN4= 1;
  39   1          delay(speed);
  40   1         IN1=0; IN2=0; IN3=1; IN4=0;
  41   1          delay(speed);
  42   1          IN1=0; IN2=1; IN3=0; IN4 = 0;
  43   1         delay(speed);
  44   1          IN1 =1; IN2=0; IN3=0; IN4 =0;
  45   1           delay(speed);
  46   1      }
  47          
  48          void main() {
  49   1      EN1 = 1;    
  50   1      EN2 = 1;
  51   1      
  52   1          while (1) {
  53   2          if (start == 0)  
  54   2        motor_on = 1;
C51 COMPILER V9.59.0.0   STEPPER_MOTOR                                                     08/11/2025 16:01:55 PAGE 2   

  55   2          
  56   2      
  57   2          if (stop == 0)
  58   2          motor_on = 0;
  59   2      
  60   2          if (rev == 0)
  61   2         dir = ~dir;
  62   2      
  63   2         if (inc == 0 && speed > 50)
  64   2          speed -= 100;
  65   2      
  66   2           if (dec == 0 && speed < 1000)
  67   2           speed += 100;
  68   2      
  69   2              if (motor_on) {
  70   3               if (dir == 0)
  71   3               forward();
  72   3              else
  73   3               reverse();
  74   3              } else {
  75   3               IN1=IN2=IN3=IN4=0;  
  76   3              }
  77   2            delay(10); 
  78   2      }
  79   1      }
  80          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    224    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
